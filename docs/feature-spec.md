# MotionGallery Feature Spec

> 상태 표기
>
> - [ ] 미구현 / 예정
> - [x] 구현 완료

---

## 0. 프로젝트 개요

- [ ] 다양한 프론트엔드 모션/애니메이션 예제를 공유하는 웹 갤러리
- [ ] 기술 스택: Next.js(App Router) + TypeScript + TailwindCSS + Shadcn UI + Supabase(Auth/DB) + GSAP + Framer Motion + (추후) AI 기능

<!--  별로임, 다시 쓰기 -->

- [ ] 주요 도메인
  - [ ] Auth (이메일/소셜 로그인, 회원가입, 탈퇴)
  - [ ] Examples (예제 CRUD, 태그, 썸네일, 모션)
  - [ ] Interactions (좋아요, 북마크, 조회수)
  - [ ] Comments (댓글, 대댓글)
  - [ ] MyPage (내 활동 모아보기)
  - [ ] Search & AI (자연어 검색, 자동 태그, 요약)
  - [ ] 공통 UI/UX (다크모드, 로딩/Empty UI, 모션 등)

---

## 1. Auth & User (인증 / 유저 관리)

### 1-1. 이메일 회원가입 플로우

- [ ] 이메일 회원가입 버튼 클릭 시 , 닉네임/이메일/비밀번호 입력 폼 노출
- [ ] 닉네임 자동 생성 버튼 (랜덤 닉네임 생성)
- [ ] 이메일 입력 시 **Gmail 제한** 등 도메인 정책 적용(인증번호 전송 관련 제한)???????
- [ ] 비밀번호 스키마
  - [ ] 6자 이상, 20자 이하
  - [ ] 영문 + 숫자 포함 검사
- [ ] 비밀번호 확인 인풋
  - [ ] onBlur 시 원 비밀번호와 일치 여부 검사
  - [ ] 불일치 시 에러 메시지 노출
- [ ] 닉네임 필수 입력 및 형식 검증 (길이, 허용 문자 등)

#### 이메일 인증 (6자리 숫자 코드)

- [ ] "인증하기" 버튼 클릭 시 6자리 인증 코드 생성 -> !!!!!!!!!!!!!!!!!!!! 이메일 형식 검증 먼저하고 아니라면 에러메시지, 맞다면 인증코드 생성
- [ ] 인증 코드 `verification_codes` 테이블 저장 (email, code, created_at)
- [ ] 해당 이메일로 인증번호 6자리 전송
- [ ] 전송완료까지 버튼에 로딩 효과
- [ ] 인증번호 입력 인풋 + "인증 확인" 버튼
- [ ] 올바른 코드 입력 시 인증 완료 처리 (플래그 상태 유지) ????????????????????플래그 상태 유지가 뭐지
- [ ] 잘못된 코드 / 만료된 코드 안내 토스트???????????????에러 메시지???
- [ ] 동일 이메일로 인증 재요청 시, 기존 코드 삭제 후 새 코드 발급
- [ ] 인증 코드 유효 시간(예: 5분 or 10분) 체크 로직

#### 회원가입 제출 시 검증

- [ ] 회원가입 버튼 클릭 시:
  - [ ] 닉네임 중복 체크 (user 테이블 조회)
  - [ ] 이메일 인증 완료 여부 검사
  - [ ] 비밀번호/비밀번호 확인 일치 여부 검사
  - [ ] **이미 가입된 이메일인지 검사**
    - [ ] 동일 이메일 존재 시 회원가입 중단
    - [ ] `"이미 존재하는 이메일입니다."` 에러 메시지/토스트 노출
- [ ] 모든 조건 통과 시 Supabase Auth + users 테이블에 저장
- [ ] 회원가입 성공 시:
  - [ ] 자동 로그인 처리
  - [ ] 메인 페이지(`/`)로 이동
  - [ ] 성공 토스트 노출
- [ ] 실패 시:
  - [ ] 에러 메시지/토스트
  - [ ] 어떤 단계에서 실패했는지 로그(콘솔) 남기기

### 1-2. 로그인

- [ ] 로그인 페이지
  - [ ] 이메일/비밀번호 입력 폼
  - [ ] 로그인 버튼 클릭 시 이메일/비밀번호 스키마 검사
- [ ] 로그인 성공 시:
  - [ ] 메인 페이지 또는 이전에 보던 페이지로 리다이렉트
  - [ ] 성공 토스트
- [ ] 로그인 실패 시:
  - [ ] 이메일 또는 비밀번호 오류 토스트
  - [ ] 시도 횟수 제한(간단한 rate limit 안내 메시지 정도)

### 1-3. 소셜 로그인 / 회원가입

- [ ] 지원 제공자: Google, GitHub, Kakao
- [ ] 소셜 로그인 버튼(아이콘 + 텍스트)
- [ ] 소셜 로그인 성공 시:
  - [ ] `session.user` 가져오기
  - [ ] users 테이블에 해당 id 존재 여부 체크
    - [ ] 이미 존재하면: 기존 닉네임/프로필 유지 (매번 새 닉네임 생성하지 않기)
    - [ ] 없으면: 랜덤 닉네임 생성 후 insert
      - [ ] 생성 시, users 테이블에 같은 닉네임이 없는지 확인 후 충돌 시 다시 생성
  - [ ] 마이페이지에서 닉네임/아바타 수정 가능하도록
- [ ] **이메일 연동 정책**
  - [ ] 이메일 회원가입 후, 같은 이메일로 소셜 회원가입 -> "기존 계정과 연동할까요?" 모달 (향후 기능)
  - [ ] 지금처럼 자동 연동되는 경우, 추후 정책 변경 시 고려

### 1-4. 유저 정보 / 프로필

- [ ] `AuthProvider`로 전역 로그인 상태 관리 (supabase.auth.getUser + onAuthStateChange)
- [ ] 로딩 상태(isLoading) 동안 공통 로딩 UI 또는 Skeleton 제공
- [ ] 헤더 우측 프로필 영역:
  - [ ] 로그인 전
    - [ ] 로그인 버튼
    - [ ] 회원가입 버튼
  - [ ] 로그인 후
    - [ ] 아바타 이미지 + 닉네임
    - [ ] "글 작성하기" 버튼
- [ ] 아바타 이미지:
  - [ ] avatar_url 있는 경우 해당 이미지
  - [ ] 없으면 기본 디폴트 이미지
- [ ] 회원 탈퇴 기능:
  - [ ] 탈퇴 확인 모달
  - [ ] 인증정보(Supabase Auth user) 삭제
  - [ ] DB(users, likes, bookmarks, comments 등 관련 레코드) 삭제 or cascade 정책 확인
  - [ ] 탈퇴 완료 후 메인 페이지로 이동 + 토스트

---

## 2. Examples (예제 CRUD / 표시)

### 2-1. 예제 리스트 (메인 + 카테고리 페이지)

- [ ] 메인 페이지
  - [ ] 카테고리별 예제 리스트 섹션
  - [ ] 각 카테고리마다 예제가 존재하는 경우에만 섹션 노출
  - [ ] 카테고리 카드/섹션에 애니메이션 (GSAP/Framer Motion)
- [ ] 카테고리 페이지(`/[type]`)
  - [ ] 해당 type의 예제 전체 리스트 조회
  - [ ] 리스트 상단 검색 인풋 (텍스트 필터 or 향후 자연어 검색과 연동)
  - [ ] 카테고리 설명/타이틀 표시
- [ ] 리스트 UI
  - [ ] 카드 뷰 (썸네일, 제목, 설명, 태그, 좋아요/북마크/댓글 수)
  - [ ] 반응형 grid (모바일 1열, 태블릿 2열, 데스크톱 3~4열)
  - [ ] 무한 스크롤 또는 페이지네이션
- [ ] 예제글 데이터 없는 경우
  - [ ] Empty UI (아이콘 + 안내 문구 + "첫 예제 등록하러 가기" 버튼)
  - [ ] 카테고리 리스트 없는 경우에도 graceful 처리

### 2-2. 예제 상세 페이지(`/[type]/[id]`)

- [ ] 제목, 설명, 태그, 카테고리, 작성자, 작성일/수정일 표시
- [ ] 본문 내용: 마크다운 + 코드 블록 지원 (MarkdownViewer)
- [ ] Iframe (Codepen/CodeSandbox 등) 연동
  - [ ] 컨텐츠 내 iframe이 준비된 후에만 보여주기 (로딩 스피너/placeholder)
  - [ ] iframe 로딩 실패 시 fallback 메시지
- [ ] 썸네일 처리
  - [ ] 본문에 포함된 iframe의 URL에서 썸네일 추출
  - [ ] Codepen: shots URL
  - [ ] CodeSandbox: screenshot API
  - [ ] 썸네일 추출 실패 시 디폴트 썸네일 이미지 사용
- [ ] 권한
  - [ ] 작성자만 수정/삭제 버튼 노출
  - [ ] 직접 URL로 수정 페이지 접근 시 권한 없는 경우 403 혹은 리다이렉트

- [ ] 관련 예제
  - [ ] 상세 하단에 같은 type의 관련 예제 2개 노출
  - [ ] 현재 예제 제외
  - [ ] 랜덤 또는 비슷한 태그 기반 추천 (간단히 구현 후 나중에 고도화)

- [ ] 방문자 수 표시 ????????????????????????
  - [ ] 상세 페이지 진입 시 view count 1 증가
  - [ ] 동일 세션/사용자 중복 증가 방지(최소한 로컬 중복 체크)

### 2-3. 예제 작성 / 수정 / 삭제

- [ ] 글 작성 페이지(`/write`)
  - [ ] 제목, 카테고리(type), 설명, 내용(content)은 필수 입력
  - [ ] 입력 길이 제한
    - [ ] 제목: 최소 3자, 최대 80자
    - [ ] 설명: 최소 10자, 최대 200자
    - [ ] 내용: 최소 10자, 최대 10,000자
  - [ ] Supabase + Zod를 통한 스키마 검증
  - [ ] WYSIWYG 스타일 마크다운 에디터 사용 (MDEditor)
  - [ ] 태그 입력
    - [ ] 인풋에서 Enter 입력 시 태그 추가
    - [ ] 태그 개수 제한: 최대 10개
    - [ ] 태그 길이 제한: 1자 이상 20자 이하
    - [ ] 공백만 있는 태그 추가 불가 (trim 후 빈 문자열이면 무시)
    - [ ] 특수문자만으로 이루어진 태그 추가 불가 (예: "!!!", "@@@")
    - [ ] 중복 태그 추가 방지
    - [ ] 태그 삭제 기능 (X 버튼)
  - [ ] 제출 시:
    - [ ] 폼 검증 실패 → 각 필드별 에러 메시지 + 토스트
    - [ ] 성공 시 → 토스트 + 해당 글 상세 페이지로 이동

- [ ] 글 수정 페이지(`/write?id=...`)
  - [ ] 기존 예제 데이터를 불러와 폼 초기값 설정
  - [ ] 태그도 함께 로드
  - [ ] 수정 완료 시 토스트 + 상세 페이지 이동
  - [ ] 권한 없는 사용자가 URL로 접근 시 처리 (403/리다이렉트)

- [ ] 글 삭제
  - [ ] 삭제 버튼 클릭 시 확인 모달
  - [ ] 확인 시 examples에서 삭제
  - [ ] 연관 데이터 처리
    - [ ] likes 테이블에서 해당 example_id 삭제
    - [ ] bookmarks 테이블에서 삭제
    - [ ] comments 테이블에서 삭제
  - [ ] 삭제 성공 시:
    - [ ] 토스트 + 메인 또는 카테고리 페이지로 이동
  - [ ] 실패 시:
    - [ ] 에러 토스트 및 로그

---

## 3. Interactions (좋아요 / 북마크 / 조회수)

### 3-1. 좋아요

- [ ] ExampleCard / 상세 페이지 둘 다에서 좋아요 토글 가능
- [ ] 비로그인 상태
  - [ ] 클릭 시 "로그인이 필요합니다." 토스트
  - [ ] 로그인 페이지로 이동 여부는 정책에 따라
- [ ] 로그인 상태
  - [ ] 이미 좋아요 된 상태 -> 클릭 시 likes 테이블에서 삭제
  - [ ] 좋아요 안 된 상태 -> 클릭 시 likes 테이블 insert
- [ ] UI 동작
  - [ ] 하트 아이콘 filled/outline 전환
  - [ ] likeCount 즉시 증가/감소 (optimistic UI)
  - [ ] API 실패 시 상태 롤백 + 에러 토스트
- [ ] 예외 처리 (더블 클릭 / 빠른 연속 클릭)
  - [ ] 좋아요 요청 처리 중에는 버튼을 잠시 비활성화하여 중복 요청 방지
  - [ ] 또는 내부 `isLiking` 플래그로 요청 중 추가 클릭 무시
  - [ ] 연속 클릭으로 인해 서버 응답 순서가 뒤바뀌어도 최종 상태가 일관되도록 처리

### 3-2. 북마크??????????????????/ 좋아요와 동일하게 작성하기

- [ ] 카드 & 상세에서 북마크 토글
- [ ] 비로그인 시 좋아요와 동일하게 토스트 처리
- [ ] 로그인 시 bookmarks 테이블 insert/delete
- [ ] UI 동작
  - [ ] 아이콘 상태 전환
  - [ ] 에러 시 롤백

### 3-3. 카드뷰 UI

- [ ] 카드에 다음 정보 표시:
  - [ ] 썸네일
  - [ ] 제목 (말줄임 처리)
  - [ ] 한줄 요약(QI 자동 생성 요약)
  - [ ] 좋아요 수
  - [ ] 댓글 수
  - [ ] 북마크 아이콘 상태
- [ ] 카드 클릭 -> 상세 페이지로 이동
- [ ] 카드에서 댓글 아이콘 클릭 시 -> 해당 상세 페이지의 댓글 영역(`#comment`)으로 스크롤 이동

---

## 4. Comments (댓글 / 대댓글)

- [ ] 댓글 리스트
  - [ ] 예제 상세 페이지 하단 댓글 영역
  - [ ] 기본 정렬 (최신순 or 오래된 순)
- [ ] 댓글 작성
  - [ ] 로그인된 유저만 작성 가능
  - [ ] 비로그인 시 댓글 입력 시도 -> 로그인 안내 토스트
  - [ ] 작성 후 입력창 초기화 + 리스트 갱신
- [ ] 댓글 수정/삭제
  - [ ] 작성자만 수정/삭제 버튼 노출
  - [ ] 수정 시 기존 내용 인풋에 채워넣고 수정 후 저장
  - [ ] 삭제 시 확인 모달
- [ ] 대댓글(Reply)
  - [ ] 부모 댓글 아래 indent 형태로 표시
  - [ ] 답글 버튼 클릭 시 대댓글 입력창 노출
- [ ] 예외 처리
  - [ ] 댓글 없을 때 Empty UI
  - [ ] API 실패 시 에러 토스트
- [ ] 스켈레톤
  - [ ] 댓글 로딩 중 skeleton UI 표시

---

## 5. MyPage (마이페이지 / 내 활동)

- [ ] 기본 정보
  - [ ] 닉네임, 이메일, 아바타 표시
- [ ] 내 정보 수정
  - [ ] 닉네임 변경
  - [ ] 아바타 이미지 변경(업로드)
- [ ] 내 활동
  - [ ] 내가 작성한 글 리스트
  - [ ] 내가 북마크한 글 리스트
  - [ ] 내가 좋아요한 글 리스트(선택)
  - [ ] 내가 쓴 댓글 리스트
  - [ ] 히스토리(간단한 활동 로그) 섹션 (선택)
- [ ] 각 리스트에서 카드 클릭 시 해당 상세 페이지로 이동

---

## 6. Search & AI 기능

### 6-1. 기본 검색

- [ ] 헤더/메인/카테고리 페이지 등에서 검색 인풋 제공
- [ ] 검색 조건
  - [ ] 제목, 설명, 태그 기준 부분 일치 검색
  - [ ] 카테고리별 검색 필터
  - [ ] 정렬 옵션 (최신순, 인기순(좋아요 수), 조회수 등)
- [ ] 검색 결과 페이지 or 동일 페이지 내 리스트 갱신

### 6-2. 자연어 검색 & 추천 (AI Search)

- [ ] 메인 페이지 Hero 영역의 AI 검색 인풋
  - [ ] "스크롤 트리거 예제 보여줘" 같은 자연어 입력
  - [ ] 백엔드/AI API 연동으로 비슷한 모션 추천 리스트 가져오기
- [ ] 추천된 예제 리스트를 별도의 섹션으로 표시

### 6-3. AI 자동 태그 & 요약(QI)

- [ ] 글 작성 시
  - [ ] 본문/제목을 기반으로 AI가 태그 추천 목록 반환
  - [ ] 유저가 클릭해서 태그로 추가할 수 있게
- [ ] QI(한줄 요약)
  - [ ] 글 내용 기반으로 한줄 요약 자동 생성
  - [ ] 카드뷰에 요약 문구 표시

---

## 7. UI/UX & 애니메이션

### 7-1. 레이아웃 & 네비게이션

- [ ] 헤더
  - [ ] 좌측: 로고
  - [ ] 우측: 카테고리 메뉴, 로그인/회원가입(또는 프로필/글 작성)
  - [ ] 스크롤 다운 시 헤더 숨김, 스크롤 업 시 다시 노출 (헤더 모션)
- [ ] 푸터
  - [ ] 간단한 카피라이트/링크 등
- [ ] Floating Add Button
  - [ ] 우측 하단 고정 + 글 작성 페이지로 이동
  - [ ] 등장 애니메이션 및 hover/tap 모션

### 7-2. 다크/라이트 모드

- [ ] Theme Provider로 라이트/다크 모드 전환
- [ ] CSS 변수 기반 컬러 토큰 정리
- [ ] 다크 모드에서 에디터/Markdown 배경색 등 일관성 유지
- [ ] 모드 상태를 로컬스토리지 등으로 기억

### 7-3. 공통 모션

- [ ] AnimatedContentWrapper로 섹션 등장 애니메이션 (y, opacity, stagger)
- [ ] 카드 hover 시 살짝 떠오르는 효과
- [ ] 페이지 전환 시 기본 페이드/슬라이드 애니메이션(선택)

### 7-4. 로딩 & Empty UI & Skeleton

- [ ] 페이지/데이터 로딩 시
  - [ ] 전체 페이지 로딩 스피너 or Skeleton
- [ ] 예제 리스트, 댓글, 마이페이지 리스트 등에 Skeleton 적용
- [ ] Empty 상태
  - [ ] 데이터 없을 때 상황별 안내 문구 + CTA 버튼

---

## 8. 품질 / 아키텍처 / 기타

### 8-1. 상태관리 및 데이터 흐름

- [ ] Supabase 서버 컴포넌트 + 클라이언트 훅 패턴 정리
- [ ] `useExampleInteractions` 훅으로 좋아요/북마크 로직 공통화
- [ ] AuthProvider 전역 상태 사용 (user, isLoading, signOut)
- [ ] API 호출 에러 공통 처리 (토스트 + 콘솔 로그)

### 8-2. 폴더 구조 & 네이밍 규칙

- [ ] `src/app`, `src/components`, `src/features`, `src/hooks`, `src/lib`, `src/types`, `src/data` 등 구조 정리
- [ ] 파일명/폴더명 네이밍 규칙 문서화
  - [ ] 컴포넌트: PascalCase
  - [ ] hooks: useSomething
  - [ ] DB 컬럼: snake_case
  - [ ] TS 타입: PascalCase
- [ ] 상수/환경 변수
  - [ ] 공통 상수 파일 분리 (`src/constants` 혹은 `src/config`)
  - [ ] Supabase URL, 키, 사이트 URL 등 환경 변수 정리

### 8-3. TypeScript & 타입 정의

- [ ] `Example`, `User` 등 도메인 타입 정의 (`src/types`)
- [ ] Supabase `Database` 타입 생성 및 연동
- [ ] 주요 hooks/컴포넌트에 제네릭/Props 타입 적용

### 8-4. 성능 & SEO

- [ ] Lighthouse 체크 및 개선
  - [ ] 이미지 최적화 (next/image)
  - [ ] 불필요한 re-render 줄이기
  - [ ] 코드 스플리팅 / lazy loading (특히 에디터, GSAP 등 heavy 컴포넌트)
- [ ] SEO
  - [ ] 페이지별 메타데이터(title, description, og:image)
  - [ ] 탭 이동/포커스 시 키보드 접근성 (tab index, skip link 등)

### 8-5. 예외 처리 & 에러 핸들링

- [ ] 공통 에러 Boundary (필요 시)
- [ ] 404 페이지
  - [ ] 존재하지 않는 예제/카테고리 접근 시 notFound
- [ ] 네트워크 에러 시
  - [ ] "네트워크 상태를 확인해주세요" 토스트
- [ ] Supabase 에러 로깅
  - [ ] 콘솔 + (추후) 모니터링 서비스 연동
